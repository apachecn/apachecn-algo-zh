### 587. Erect the Fence


é¢˜ç›®:
<https://leetcode.com/problems/Erect-the-Fence/>


éš¾åº¦:

Hard



æ€è·¯

é¢˜ç›®è¦æ±‚ç”¨ä¸€ä¸ªå›´æ æŠŠæ‰€æœ‰çš„ç‚¹ï¼ˆðŸŒ²ï¼‰å›´èµ·æ¥ï¼Œç„¶åŽæ±‚å¤„äºŽå›´æ ä¸Šç‚¹ï¼ˆðŸŒ²ï¼‰çš„é›†åˆã€‚

æˆ‘ä»¬å¯ä»¥å‘çŽ°ï¼Œä»Žæœ€å·¦è¾¹çš„é‚£ä¸ªç‚¹ä¸€ç›´å¾€å³èµ°ï¼Œåªè¦ä¸€ç›´éƒ½æ˜¯èµ°çš„é€†æ—¶é’ˆæ–¹å‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€å®šå¯ä»¥æ‰¾åˆ°è¿™æ¡å›´æ ã€‚é‚£ä¹ˆæŽ¥ä¸‹æ¥å°±è€ƒè™‘æœ€ç®€å•çš„æƒ…å†µï¼Œ

- åªæœ‰ä¸¤ä¸ªç‚¹```p```å’Œ```q```ï¼Œæˆ‘ä»¬ä»Ž```p```èµ°åˆ°```q```ï¼Œå½“```p```åˆ°åŽŸç‚¹è¿™æ¡ç›´çº¿çš„æ–œçŽ‡å°äºŽ```q```åˆ°åŽŸç‚¹è¿™æ¡ç›´çº¿çš„æ–œçŽ‡æ—¶ï¼Œ```p->q```å°±æ˜¯æ²¿é€†æ—¶é’ˆæ–¹å‘èµ°çš„ï¼›
- æŽ¥ä¸‹æ¥è€ƒè™‘3ä¸ªç‚¹:```pï¼Œqï¼Œr```ï¼Œä»¥```p```ä¸ºå‚ç…§ç‚¹ï¼ˆå³å‰é¢çš„åŽŸç‚¹ï¼‰ï¼Œé‚£ä¹ˆä»Ž```q```èµ°åˆ°```r```çš„æ—¶å€™ï¼Œåªè¦```q```åˆ°```q```è¿™æ¡ç›´çº¿çš„æ–œçŽ‡å°äºŽ```r```åˆ°```p```è¿™æ¡ç›´çº¿çš„æ–œçŽ‡ï¼Œ```q->r```å°±æ˜¯æ²¿é€†æ—¶é’ˆæ–¹å‘èµ°çš„ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬åªè¦æž„å»ºä¸€ä¸ª```orientation```å‡½æ•°ï¼Œå°±å¯ä»¥åˆ¤æ–­å‡ºç›®å‰æˆ‘ä»¬çš„å›´æ æ˜¯ä¸æ˜¯æ²¿ç€é€†æ—¶é’ˆåœ¨èµ°ä¸‹åŽ»äº†ã€‚

æˆ‘ä»¬ç”¨ä¸€ä¸ª```stack```æ¥å­˜æ”¾ç›®å‰è®¤ä¸ºåœ¨å›´æ ä¸Šçš„ç‚¹çš„é›†åˆï¼Œç„¶åŽæŠŠæ‰€æœ‰çš„ç‚¹æŒ‰ç…§æŒ‡å®šè§„åˆ™æŽ’å¥½åºï¼š```å…ˆæŒ‰ç…§ç‚¹çš„xåæ ‡å‡åºæŽ’åˆ—ï¼Œå¦‚æžœxç›¸ç­‰åˆ™æŒ‰ç…§ç‚¹çš„yåæ ‡å‡åºæŽ’åˆ—```ã€‚è¿™æ ·æˆ‘ä»¬ä¾æ¬¡å–ç‚¹ï¼Œåªè¦stacké‡Œé¢çš„ç‚¹å¤§äºŽç­‰äºŽ2ä¸ªæˆ‘ä»¬å°±è¦æ— é™è¿›è¡Œåˆ¤æ–­æ˜¯å¦èµ°çš„æ˜¯é€†æ—¶é’ˆï¼Œå¦‚æžœä¸æ˜¯å°±æŠŠstacké‡Œé¢æœ€åŽé‚£ä¸ªç‚¹popå‡ºåŽ»ï¼ˆå¯èƒ½ä¸€ç›´popåˆ°åªå‰©ä¸€ä¸ªç‚¹ï¼‰ï¼Œå¦åˆ™å°±æŠŠç›®å‰çš„è¿™ä¸ªç‚¹åŠ å…¥åˆ°stackä¸­åŽ»ï¼Œå› ä¸ºç›®å‰å®ƒè¿˜æ˜¯åœ¨é€†æ—¶é’ˆæ–¹å‘ä¸Šçš„ã€‚

ä»Žå·¦å¾€å³èµ°å®Œä¸€épointsä¹‹åŽï¼Œæˆ‘ä»¬å›´æ çš„ä¸‹éƒ¨åˆ†lower hullå°±æž„å»ºå¥½äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬è¿˜è¦æž„å»ºå›´æ çš„upper hullï¼Œå› æ­¤æˆ‘ä»¬å°†pointsé€†åºä¸€ä¸‹ï¼Œä»Žå³å¾€å·¦å†æ¥ä¸€æ¬¡éåŽ†ï¼Œä»ç„¶çœ‹æ˜¯å¦èµ°çš„æ˜¯é€†æ—¶é’ˆã€‚ä½†æ˜¯è¿™æ¬¡éåŽ†æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€ä¸ªåˆ¤æ–­ï¼Œå°±æ˜¯ä¹‹å‰æ”¾è¿›stackçš„ç‚¹ï¼Œæ­¤æ—¶æˆ‘ä»¬è¿˜æ˜¯ä¼šç»è¿‡å®ƒï¼Œå¦‚æžœå®ƒå·²ç»åœ¨stacké‡Œé¢äº†ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†åŠ è¿›åŽ»äº†ï¼ŒåŒæ—¶è¿™æ ·ä¹Ÿé¿å…äº†æˆ‘ä»¬æŠŠæœ€å·¦è¾¹çš„ç‚¹é‡å¤åŠ è¿›åŽ»ã€‚



```python
python
import functools
class Solution:
    def outerTrees(self, points):
        """
        :type points: List[Point]
        :rtype: List[Point]
        """
        def orientation(p, q, r):
            return (q.y - p.y)*(r.x - p.x) - (r.y - p.y)*(q.x - p.x)
        def myComparator(p,q):
            return p.x - q.x if p.x != q.x else p.y - q.y
          
        stack= []
        points.sort(key = functools.cmp_to_key(myComparator))
        for i in range(len(points)):
            while (len(stack) >= 2 and orientation(stack[-2],stack[-1],points[i]) > 0):
                stack.pop()
            stack.append(points[i])
        points.reverse();
        for i in range(len(points)):
            while (len(stack) >= 2 and orientation(stack[-2],stack[-1],points[i]) > 0):
                stack.pop()
            if points[i] not in stack:
                stack.append(points[i])
        return stack
```

```java
java
class Solution {
    public List<Point> outerTrees(Point[] points) {
        List<Point> res = new ArrayList<Point>();
        Arrays.sort(points, new Comparator<Point>(){
            @Override
            public int compare(Point p, Point q){
                return p.x == q.x ? p.y - q.y : p.x - q.x;
            }
        });
        Stack<Point> stack = new Stack<>();
        for (int i = 0; i < points.length; i++){
            while(stack.size() >= 2 && orientation(stack.get(stack.size() - 2), stack.peek(), points[i]) > 0){
                stack.pop();
            }
            stack.push(points[i]);
        }
        //stack.pop();
        for (int i = points.length - 1; i >= 0; i--){
            while(stack.size() >= 2 && orientation(stack.get(stack.size() - 2), stack.peek(), points[i]) > 0){
                stack.pop();
            }
            stack.push(points[i]);
        }
        res.addAll(new HashSet<>(stack));
        return res;
    }
    
    public int orientation(Point p, Point q, Point r){
        return (q.y - p.y)*(r.x - p.x) - (r.y - p.y)*(q.x - p.x);
    }
}
```



Author: Keqi Huang

If you like it, please spread your support

![Support](https://github.com/Lisanaaa/myTODOs/blob/master/WechatIMG17.jpeg)