# 158. Read N Characters Given Read4 II - Call multiple times

**<font color=red>éš¾åº¦: å›°éš¾</font>**

## åˆ·é¢˜å†…å®¹

> åŸé¢˜è¿æ¥

* https://leetcode.com/problems/read-n-characters-given-read4-ii-call-multiple-times

> å†…å®¹æè¿°

```
The API: int read4(char *buf) reads 4 characters at a time from a file.

The return value is the actual number of characters read. For example, it returns 3 if there is only 3 characters left in the file.

By using the read4 API, implement the function int read(char *buf, int n) that reads n characters from the file.

Note:
The read function may be called multiple times.

Example 1: 

Given buf = "abc"
read("abc", 1) // returns "a"
read("abc", 2); // returns "bc"
read("abc", 1); // returns ""
Example 2: 

Given buf = "abc"
read("abc", 4) // returns "abc"
read("abc", 1); // returns ""
```

## è§£é¢˜æ–¹æ¡ˆ

> æ€è·¯ 1

è¿™ä¸ªé¢˜ç›®çš„æè¿°å°±æ˜¯ä¸€å¨å±ğŸ’©ï¼ŒçœŸçš„ï¼Œsbã€‚

æˆ‘æ¥æ€»ç»“ä¸€ä¸‹ï¼Œè·Ÿç¬¬157é¢˜ä¸ä¸€æ ·çš„åœ°æ–¹å°±æ˜¯ï¼Œ157æ˜¯å°±è¯»ä¸€æ¬¡ï¼Œ158æ˜¯å¯ä»¥è¯»å¥½å‡ æ¬¡
ä¾‹å¦‚ï¼š
æ–‡ä»¶æ˜¯â€˜abcdefgâ€™
- 157é¢˜å°±è¯»ä¸€æ¬¡ï¼Œç»™ä¸€ä¸ªnå°±è¡Œäº†ã€‚nç»™1é‚£bufå°±æ˜¯â€˜aâ€™, nç»™2é‚£bufå°±æ˜¯â€˜abâ€™
- ä½†æ˜¯158ä¸ä¸€æ ·ï¼Œå¯ä»¥å¤šæ¬¡readï¼Œæ¯”å¦‚ç¬¬ä¸€æ¬¡nç»™1ï¼Œé‚£bufæ˜¯â€˜aâ€™ï¼Œå†readä¸€æ¬¡ï¼Œnç»™2ï¼Œé‚£'a'å·²ç»è¯»è¿‡äº†ï¼Œæ‰€ä»¥ç°åœ¨bufæ˜¯'bc'äº†ï¼Œ
å¦‚æœå†æ¥ä¸ªn=3çš„è¯ï¼Œbufå°±æ˜¯â€˜defâ€™,

æ€»ä¹‹å°±æ˜¯ä¸€ä¸ªtest case ä¸­readå‡½æ•°å¯ä»¥è°ƒç”¨ä¸€æ¬¡å’Œè°ƒç”¨å¤šæ¬¡çš„åŒºåˆ«

```python
class Solution(object):
    head, tail, buffer = 0, 0, [''] * 4 ## å®šä¹‰å…¨å±€å˜é‡
    
    def read(self, buf, n):
        """
        :type buf: Destination buffer (List[str])
        :type n: Maximum number of characters to read (int)
        :rtype: The number of characters read (int)
        """
        i = 0
        while i < n:
            if self.head == self.tail: ## read4 çš„ç¼“å­˜åŒºä¸ºç©ºçš„æ—¶å€™
                self.head = 0
                self.tail = read4(self.buffer) ## å¼€å§‹è¿›ç¼“å­˜åŒº
                if self.tail == 0:
                    break
            while i < n and self.head < self.tail:
                buf[i] = self.buffer[self.head] ## è¯»å‡ºç¼“å­˜åŒºçš„å˜é‡
                i += 1
                self.head += 1
        return i
```


